DROP ALL OBJECTS;

CREATE TABLE IF NOT EXISTS USERS (
USER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
USER_EMAIL VARCHAR(255) NOT NULL,
USER_LOGIN VARCHAR(255) NOT NULL,
USER_NAME VARCHAR(255),
BIRTHDAY DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM (
FILM_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
FILM_NAME VARCHAR(255) NOT NULL,
FILM_DESCRIPTION VARCHAR(255) NOT NULL,
FILM_RELEASE DATE NOT NULL,
FILM_DURATION INTEGER NOT NULL,
MPA_ID INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS MPA (
MPA_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
MPA_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS GENRES (
GENRE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
GENRE_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM_GENRE (
FILM_ID BIGINT NOT NULL,
GENRE_ID BIGINT NOT NULL,
CONSTRAINT FILMS_GENRES_PK PRIMARY KEY (GENRE_ID,FILM_ID)
);

CREATE TABLE IF NOT EXISTS FRIENDSHIP (
FROM_USER BIGINT NOT NULL,
TO_USER BIGINT NOT NULL,
CONSTRAINT FRIENDSHIP_PK PRIMARY KEY (FROM_USER,TO_USER)
);

CREATE TABLE IF NOT EXISTS USER_FILM_LIKES (
USER_ID BIGINT NOT NULL,
FILM_ID BIGINT NOT NULL,
CONSTRAINT USERS_FILMS_LIKES_PK PRIMARY KEY (FILM_ID,USER_ID)
);

