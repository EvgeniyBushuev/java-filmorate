CREATE TABLE IF NOT EXISTS USERS (
USER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
USER_EMAIL VARCHAR(255) NOT NULL,
USER_LOGIN VARCHAR(255) NOT NULL,
USER_NAME VARCHAR(255),
BIRTHDAY DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM (
FILM_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
FILM_NAME VARCHAR(255) NOT NULL,
FILM_DESCRIPTION VARCHAR(255) NOT NULL,
FILM_RELEASE DATE NOT NULL,
FILM_DURATION INTEGER NOT NULL,
MPA_ID INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS MPA (
MPA_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
MPA_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS GENRES (
GENRE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
GENRE_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM_GENRE (
FILM_ID BIGINT NOT NULL,
GENRE_ID BIGINT NOT NULL,
CONSTRAINT FK_FILM_ID FOREIGN KEY (FILM_ID) REFERENCES FILM,
CONSTRAINT FK_GENRE_ID FOREIGN KEY (GENRE_ID) REFERENCES GENRES,
CONSTRAINT FILM_GENRE_PK PRIMARY KEY (GENRE_ID,FILM_ID)
);

CREATE TABLE IF NOT EXISTS FRIENDSHIP (
FROM_USER BIGINT NOT NULL,
TO_USER BIGINT NOT NULL,
CONSTRAINT FK_FROM_USER_ID FOREIGN KEY (FROM_USER) REFERENCES USERS,
CONSTRAINT FK_TO_USER_ID FOREIGN KEY (TO_USER) REFERENCES USERS,
CONSTRAINT FRIENDSHIP_PK PRIMARY KEY (FROM_USER,TO_USER)
);

CREATE TABLE IF NOT EXISTS USER_FILM_LIKES (
USER_ID BIGINT NOT NULL,
FILM_ID BIGINT NOT NULL,
CONSTRAINT FK_USER_LIKES_ID FOREIGN KEY (USER_ID) REFERENCES USERS,
CONSTRAINT FK_FILM_LIKES_ID FOREIGN KEY (FILM_ID) REFERENCES FILM,
CONSTRAINT USER_FILM_LIKES_PK PRIMARY KEY (USER_ID,FILM_ID)
);


