DROP ALL OBJECTS;

CREATE TABLE IF NOT EXIST USER (
USER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
USER_EMAIL VARCHAR(255) NOT NULL,
USER_LOGIN VARCHAR(255) NOT NULL,
USER_NAME VARCHAR(255),
BIRTHDAY DATE NOT NULL
);

CREATE TABLE IF NOT EXIST FILM (
FILM_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
FILM_NAME VARCHAR(255) NOT NULL,
FILM_DESCRIPTION VARCHAR(255) NOT NULL,
FILM_RELEASE DATE NOT NULL,
FILM_DURATION INTEGER NOT NULL,
FILM_RATING_ID INTEGER NOT NULL
CONSTRAINT RELEASE_DATE_CHECK CHECK (FILM_RELEASE > '1985-12-28'),
);

CREATE TABLE IF NOT EXIST RATING (
RATING_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
RATING_NAME VARCHAR(31) NOT NULL
);

CREATE TABLE IF NOT EXIST GENRE (
GENRE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
GENRE_NAME VARCHAR(255) NOT NULLIF
);

CREATE TABLE IF NOT EXIST FILM_GENRE (
FILM_ID BIGINT NOT NULL,
GENRE_ID BIGINT NOT NULL,
CONSTRAINT FILMS_GENRES_PK PRIMARY KEY (GENRE_ID,FILM_ID)
);

CREATE TABLE IF NOT EXISTS FRIENDSHIP (
	FROM_USER BIGINT NOT NULL,
	TO_USER BIGINT NOT NULL,
	STATUS BOOLEAN DEFAULT FALSE,
	CONSTRAINT FRIENDSHIP_PK PRIMARY KEY (USER_FROM,USER_TO)
);

CREATE TABLE IF NOT EXISTS USER_FILM_LIKES (
	USER_ID BIGINT NOT NULL,
	FILM_ID BIGINT NOT NULL,
	CONSTRAINT USERS_FILMS_LIKES_PK PRIMARY KEY (FILM_ID,USER_ID)
);

